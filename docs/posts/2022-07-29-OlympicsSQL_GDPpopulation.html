<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.258">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ThomasHSimm – olympicssql_gdppopulation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//posts/Picture3.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ThomasHSimm</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ThomasHSimm"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/ThomasHSimm"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><p><img src="../posts/header2.png" height="200"></p>



<section id="olympics-data-with-sql-and-pandas--gdp-and-population" class="level1">
<h1>Olympics data with SQL and pandas- GDP and population</h1>
<blockquote class="blockquote">
<p>What is the effect of GDP and population on medals</p>
</blockquote>
<ul>
<li>toc: true</li>
<li>badges: true</li>
<li>categories: [SQL, Pandas, python, Olympics]</li>
</ul>
<p><img src="ghtop_images/header2.png" class="img-fluid"></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Due to the global importance of the Olympics, in 2020 there was a broadcast audience of more than 3 billion, I was interested to explore whether countries with the most medals will reflect global politics. And to see if the countries with most influence get more medals.</p>
<p>There are two relatively easy to obtain metrics that can be used to define the importance of a nation internationally, GDP and population.</p>
<p>Gross domestic product (GDP) is a monetary measure of the market value of all the final goods and services produced in a specific time period by countries. GDP is often used as a metric for international comparisons as well as a broad measure of economic progress. It is often considered to be the “world’s most powerful statistical indicator of national development and progress”. <a href="https://en.wikipedia.org/wiki/Gross_domestic_product">GDP Wikipedia</a>.</p>
<p>The population of a country is an important parameter in assessing the global importance of a nation. Furthermore, the more people in a country the greater the pool of potential athletes.</p>
<p>In the final part of this page I will briefly look at how the Cold War was reflected in the Olympics data.</p>
</section>
<section id="pre-analysis" class="level2">
<h2 class="anchored" data-anchor-id="pre-analysis">Pre-analysis</h2>
<section id="get-medals-won-by-country-and-year" class="level3">
<h3 class="anchored" data-anchor-id="get-medals-won-by-country-and-year">Get medals won by country and year</h3>
<p>What we want to end up with is a new table with- - Nation - Number of medals - Event or year of the event - Then the details of nations we’re studying: - GDP - Population - Continent</p>
<p>To get a unique medal count for this, we can do a count by grouping on - Nation and Year But also on: - Medal type (Gold, Silver, Bronze) - Event id As we only know if a medal is unique for an athlete if the same medal type does not exist for another athlete in the same event at the same games (year). This is to avoid duplication for team sports. If it is a mixed event then we would need to do the grouping on data of male and female athletes.</p>
<p>From inside out</p>
<ol type="1">
<li>Use <code>UNION</code> to join the males and female summer athletes
<ul>
<li>Get NOC, medal types, year, event_id</li>
</ul></li>
<li>Use <code>GROUP BY</code> to get unique medals and <code>COUNT</code></li>
<li>Use <code>GROUP BY</code> to get medals for countries in each event/year, <code>SUM</code> so we are adding up events</li>
</ol>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandasql <span class="im">import</span> sqldf</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> copy</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_F_S <span class="op">=</span>pd.read_csv(<span class="st">'data/athlete_F_S'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># df_F_W=pd.read_csv('data/athlete_F_W')</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df_M_S<span class="op">=</span>pd.read_csv(<span class="st">'data/athlete_M_S'</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># df_M_W=pd.read_csv('data/athlete_M_W')</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>df_all_athletes<span class="op">=</span> pd.read_csv(<span class="st">'data/all_athletes'</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>df_country<span class="op">=</span> pd.read_csv(<span class="st">'data/country'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df_event<span class="op">=</span> pd.read_csv(<span class="st">'data/event'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># df_games= pd.read_csv('data/games')</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># df_population= pd.read_csv('data/population')</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>df_country <span class="op">=</span> df_country.groupby(<span class="st">'NOC'</span>).<span class="bu">max</span>()</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>df_country.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Unnamed: 0</th>
      <th>Nation</th>
      <th>Continent</th>
      <th>Population</th>
      <th>GDP</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AFG</th>
      <td>0</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>32890171</td>
      <td>19807</td>
    </tr>
    <tr>
      <th>ALB</th>
      <td>1</td>
      <td>Albania</td>
      <td>Europe</td>
      <td>2829741</td>
      <td>14800</td>
    </tr>
    <tr>
      <th>ALG</th>
      <td>2</td>
      <td>Algeria</td>
      <td>Africa</td>
      <td>45400000</td>
      <td>145164</td>
    </tr>
    <tr>
      <th>AND</th>
      <td>3</td>
      <td>Andorra</td>
      <td>Europe</td>
      <td>79535</td>
      <td>3155</td>
    </tr>
    <tr>
      <th>ANG</th>
      <td>4</td>
      <td>Angola</td>
      <td>Africa</td>
      <td>33086278</td>
      <td>62307</td>
    </tr>
    <tr>
      <th>ANT</th>
      <td>5</td>
      <td>Antigua</td>
      <td>Americas</td>
      <td>99337</td>
      <td>1415</td>
    </tr>
    <tr>
      <th>ANZ</th>
      <td>7</td>
      <td>Australia</td>
      <td>Oceania</td>
      <td>25921518</td>
      <td>1330901</td>
    </tr>
    <tr>
      <th>ARG</th>
      <td>8</td>
      <td>Argentina</td>
      <td>Americas</td>
      <td>47327407</td>
      <td>383067</td>
    </tr>
    <tr>
      <th>ARM</th>
      <td>9</td>
      <td>Armenia</td>
      <td>Asia</td>
      <td>2963900</td>
      <td>12645</td>
    </tr>
    <tr>
      <th>AUT</th>
      <td>10</td>
      <td>Austria</td>
      <td>Europe</td>
      <td>9027999</td>
      <td>428965</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_by_year<span class="op">=\</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>     sqldf(<span class="st">'SELECT                                                 </span><span class="ch">\</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="st">              NOC,                                                 </span><span class="ch">\</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="st">              Year,                                                </span><span class="ch">\</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="st">              SUM(counta)              AS num_medals               </span><span class="ch">\</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="st">                FROM(SELECT                                        </span><span class="ch">\</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="st">                    NOC,                                           </span><span class="ch">\</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="st">                    Year,                                          </span><span class="ch">\</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="st">                    event_id,                                      </span><span class="ch">\</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="st">                    Medal_Bronze, Medal_Gold, Medal_Silver,        </span><span class="ch">\</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="st">                    COUNT(*) as counta                             </span><span class="ch">\</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        FROM(SELECT                                </span><span class="ch">\</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="st">                            NOC,                                   </span><span class="ch">\</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="st">                            Year,                                  </span><span class="ch">\</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="st">                            event_id,                              </span><span class="ch">\</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="st">                            Medal_Bronze, Medal_Gold, Medal_Silver </span><span class="ch">\</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="st">                        FROM                                       </span><span class="ch">\</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="st">                            df_F_S                                 </span><span class="ch">\</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="st">                        WHERE Medal_Bronze=1 OR Medal_Gold=1 OR Medal_Silver </span><span class="ch">\</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="st">                        UNION                                      </span><span class="ch">\</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="st">                        SELECT                                     </span><span class="ch">\</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="st">                            NOC,                                   </span><span class="ch">\</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="st">                            Year,                                  </span><span class="ch">\</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="st">                            event_id,                              </span><span class="ch">\</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="st">                            Medal_Bronze, Medal_Gold, Medal_Silver </span><span class="ch">\</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="st">                        FROM                                       </span><span class="ch">\</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="st">                            df_M_S                                 </span><span class="ch">\</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="st">                        WHERE Medal_Bronze=1 OR Medal_Gold=1 OR Medal_Silver) as MF                  </span><span class="ch">\</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="st">                    GROUP BY                                       </span><span class="ch">\</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="st">                        NOC, Year, event_id, Medal_Bronze, Medal_Gold, Medal_Silver</span><span class="ch">\</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="st">                    ORDER BY                                       </span><span class="ch">\</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="st">                        NOC) as inner                              </span><span class="ch">\</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                               </span><span class="ch">\</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="st">                NOC, Year;'</span>,<span class="bu">locals</span>()) </span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>df_by_year[df_by_year.Year<span class="op">==</span><span class="dv">2016</span>].sort_values(<span class="st">'num_medals'</span>,ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>NOC</th>
      <th>Year</th>
      <th>num_medals</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1246</th>
      <td>USA</td>
      <td>2016</td>
      <td>121</td>
    </tr>
    <tr>
      <th>246</th>
      <td>CHN</td>
      <td>2016</td>
      <td>70</td>
    </tr>
    <tr>
      <th>527</th>
      <td>GBR</td>
      <td>2016</td>
      <td>67</td>
    </tr>
    <tr>
      <th>415</th>
      <td>EUN</td>
      <td>2016</td>
      <td>56</td>
    </tr>
    <tr>
      <th>471</th>
      <td>FRA</td>
      <td>2016</td>
      <td>42</td>
    </tr>
    <tr>
      <th>497</th>
      <td>FRG</td>
      <td>2016</td>
      <td>42</td>
    </tr>
    <tr>
      <th>706</th>
      <td>JPN</td>
      <td>2016</td>
      <td>41</td>
    </tr>
    <tr>
      <th>38</th>
      <td>ANZ</td>
      <td>2016</td>
      <td>29</td>
    </tr>
    <tr>
      <th>669</th>
      <td>ITA</td>
      <td>2016</td>
      <td>28</td>
    </tr>
    <tr>
      <th>230</th>
      <td>CAN</td>
      <td>2016</td>
      <td>22</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
</section>
<section id="join-with-the-country-table" class="level3">
<h3 class="anchored" data-anchor-id="join-with-the-country-table">Join with the country table</h3>
<p>Now just join to the country table</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_<span class="op">=\</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>     sqldf(<span class="st">'SELECT                              </span><span class="ch">\</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="st">              NOC,                              </span><span class="ch">\</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="st">              Nation,                           </span><span class="ch">\</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="st">              Continent,                        </span><span class="ch">\</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="st">              SUM(num_medals)  AS number_of_medals,                  </span><span class="ch">\</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="st">              Population,                       </span><span class="ch">\</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="st">              GDP                               </span><span class="ch">\</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="st">            FROM(                               </span><span class="ch">\</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="st">                SELECT *                        </span><span class="ch">\</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="st">                FROM                            </span><span class="ch">\</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="st">                    df_country AS c             </span><span class="ch">\</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="st">                INNER JOIN                      </span><span class="ch">\</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="st">                    df_by_year AS d             </span><span class="ch">\</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="st">                ON                              </span><span class="ch">\</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="st">                    c.NOC=d.NOC                 </span><span class="ch">\</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="st">                WHERE                           </span><span class="ch">\</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="st">                    d.Year&gt;=2008)               </span><span class="ch">\</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                            </span><span class="ch">\</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="st">                NOC,Continent                   </span><span class="ch">\</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="st">            ORDER BY                            </span><span class="ch">\</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="st">                num_medals desc;'</span>,<span class="bu">locals</span>())</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>df_                    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>NOC</th>
      <th>Nation</th>
      <th>Continent</th>
      <th>number_of_medals</th>
      <th>Population</th>
      <th>GDP</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>USA</td>
      <td>USA</td>
      <td>Americas</td>
      <td>334</td>
      <td>332906919</td>
      <td>20936600</td>
    </tr>
    <tr>
      <th>1</th>
      <td>CHN</td>
      <td>China</td>
      <td>Asia</td>
      <td>259</td>
      <td>1412600000</td>
      <td>14722731</td>
    </tr>
    <tr>
      <th>2</th>
      <td>EUN</td>
      <td>Russia</td>
      <td>Europe</td>
      <td>210</td>
      <td>147190000</td>
      <td>1483498</td>
    </tr>
    <tr>
      <th>3</th>
      <td>GBR</td>
      <td>UK</td>
      <td>Europe</td>
      <td>180</td>
      <td>67081234</td>
      <td>2707744</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ANZ</td>
      <td>Australia</td>
      <td>Oceania</td>
      <td>110</td>
      <td>25921518</td>
      <td>1330901</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>99</th>
      <td>TUN</td>
      <td>Tunisia</td>
      <td>Africa</td>
      <td>7</td>
      <td>11746695</td>
      <td>39236</td>
    </tr>
    <tr>
      <th>100</th>
      <td>UAE</td>
      <td>United Arab Emirates</td>
      <td>Asia</td>
      <td>1</td>
      <td>9282410</td>
      <td>421142</td>
    </tr>
    <tr>
      <th>101</th>
      <td>UGA</td>
      <td>Uganda</td>
      <td>Africa</td>
      <td>1</td>
      <td>42885900</td>
      <td>37372</td>
    </tr>
    <tr>
      <th>102</th>
      <td>VEN</td>
      <td>Venezuela</td>
      <td>Americas</td>
      <td>5</td>
      <td>28705000</td>
      <td>482359</td>
    </tr>
    <tr>
      <th>103</th>
      <td>VIE</td>
      <td>Vietnam</td>
      <td>Asia</td>
      <td>3</td>
      <td>98505400</td>
      <td>271158</td>
    </tr>
  </tbody>
</table>
<p>104 rows × 6 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="correlation-in-population-and-gdp" class="level2">
<h2 class="anchored" data-anchor-id="correlation-in-population-and-gdp">Correlation in Population and GDP</h2>
<p>First create a function to display correlations: - produce scatter plots - find which countries are poor correlation - find some correlation stats</p>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> modname(string):</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    string<span class="op">=</span><span class="st">''</span>.join([string[<span class="dv">0</span>].upper(),string[<span class="dv">1</span>:].lower()])</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    string<span class="op">=</span>string.replace(<span class="st">'_'</span>,<span class="st">' '</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> string</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doFigAddOns(nomX,nomY,fontsize):</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        plt.ylabel(modname(nomY), fontsize<span class="op">=</span>fontsize)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        plt.xlabel(nomX, fontsize<span class="op">=</span>fontsize)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        plt.grid(<span class="va">True</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> scatter_combo(df_temp,xval,yval):</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>df_temp.set_index(<span class="st">'Nation'</span>)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">14</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>copy.copy(df_temp)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove 0 values</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>df_temp[df_temp.loc[:,xval]<span class="op">!=</span><span class="dv">0</span>]</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># drop NaNs </span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>df_temp.dropna()</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># values in millions</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    df_temp.loc[:,xval]<span class="op">=</span>df_temp.loc[:,xval]<span class="op">/</span><span class="fl">1e6</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the names of the columns</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    nomX<span class="op">=</span>xval<span class="co">#(df_temp.columns[xval])</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    nomY<span class="op">=</span>yval<span class="co">#modname(df_temp.columns[yval])</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define the x and y values</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    X<span class="op">=</span>df_temp.loc[:,xval]</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    Y<span class="op">=</span>df_temp.loc[:,yval]</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># do some plots</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    fig,ax<span class="op">=</span>plt.subplots(figsize<span class="op">=</span>(<span class="dv">7</span>,<span class="dv">15</span>))</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    plt.rcParams[<span class="st">'font.size'</span>] <span class="op">=</span> <span class="st">'13'</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fig A</span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    ax1<span class="op">=</span>plt.subplot(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    ax1.plot(X ,Y,<span class="st">'+b'</span>,markeredgewidth<span class="op">=</span><span class="dv">2</span>,ms<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    m,b<span class="op">=</span>np.polyfit(X,Y,<span class="dv">1</span>)</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    Ypred<span class="op">=</span>X<span class="op">*</span>m<span class="op">+</span>b</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    plt.plot(X,Ypred, <span class="st">'--k'</span>)<span class="op">;</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>    doFigAddOns(nomX,nomY,fontsize)</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fig B</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>    ax3<span class="op">=</span>plt.subplot(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>    ax3.plot(X ,Y,<span class="st">'+b'</span>,markeredgewidth<span class="op">=</span><span class="dv">2</span>,ms<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>    X<span class="op">=</span>X.sort_values()</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>    Ypred<span class="op">=</span>X<span class="op">*</span>m<span class="op">+</span>b</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>    plt.plot(X,Ypred, <span class="st">'--k'</span>)<span class="op">;</span></span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>    plt.yscale(<span class="st">'log'</span>)</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>    plt.xscale(<span class="st">'log'</span>)</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>    doFigAddOns(nomX,nomY,fontsize) </span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Fig C</span></span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>    diffa <span class="op">=</span> df_temp.loc[:,yval]<span class="op">-</span>Ypred</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>    ax2<span class="op">=</span>plt.subplot(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>    ax2.plot(X,diffa, <span class="st">'xk'</span>,markeredgewidth<span class="op">=</span><span class="dv">2</span>,ms<span class="op">=</span><span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>    plt.xscale(<span class="st">'log'</span>)</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>    doFigAddOns(nomX,<span class="st">'Difference between </span><span class="ch">\n</span><span class="st">linear fit'</span>,fontsize)</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>    plt.subplots_adjust(hspace<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>    <span class="co"># because sorted x, need to get original x back</span></span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>    X<span class="op">=</span>df_temp.loc[:,xval]</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get some correlation values, and what are worst countries</span></span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>    corr<span class="op">=</span>scipy.stats.pearsonr(X, Y)</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Correlation of  = </span><span class="sc">{:.2f}</span><span class="st"> (</span><span class="sc">{:.0e}</span><span class="st">) </span><span class="ch">\n</span><span class="st"> </span><span class="ch">\</span></span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a><span class="st">           And m= </span><span class="sc">{:.3f}</span><span class="st"> b=</span><span class="sc">{:.1f}</span><span class="st">          '</span>.<span class="bu">format</span>(corr[<span class="dv">0</span>],corr[<span class="dv">1</span>],m,b))</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>    country_hi_corr<span class="op">=</span>(diffa).sort_values(ascending<span class="op">=</span><span class="va">False</span>).index[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Countries worst correlation where overachive'</span>,diffa[country_hi_corr])</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>    country_low_corr<span class="op">=</span>(diffa).sort_values().index[<span class="dv">0</span>:<span class="dv">10</span>]</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Countries worst correlation where unachieve'</span>,diffa[country_low_corr])</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>    d<span class="op">=</span>{<span class="st">'Underachieve'</span>:country_low_corr,<span class="st">'Overachieve'</span>:country_hi_corr}</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(data<span class="op">=</span>d)</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getCorr(df_temp, xval,yval):</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>copy.copy(df_temp)</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove 0 values</span></span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>df_temp[df_temp.loc[:,xval]<span class="op">!=</span><span class="dv">0</span>]</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># drop NaNs </span></span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>    df_temp<span class="op">=</span>df_temp.dropna()</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>    <span class="co"># define the x and y values</span></span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>    X<span class="op">=</span>df_temp.loc[:,xval]</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>    Y<span class="op">=</span>df_temp.loc[:,yval]</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get some correlation values, and what are worst countries</span></span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>    corr<span class="op">=</span>scipy.stats.pearsonr(X, Y)</span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Pearson Correlation of  = </span><span class="sc">{:.2f}</span><span class="st"> (</span><span class="sc">{:.0e}</span><span class="st">)'</span>.<span class="bu">format</span>(corr[<span class="dv">0</span>],corr[<span class="dv">1</span>]))</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get some correlation values, and what are worst countries</span></span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>    corr<span class="op">=</span>scipy.stats.spearmanr(X, Y)</span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Spearman Correlation of  = </span><span class="sc">{:.2f}</span><span class="st"> (</span><span class="sc">{:.0e}</span><span class="st">)'</span>.<span class="bu">format</span>(corr[<span class="dv">0</span>],corr[<span class="dv">1</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>popCorr<span class="op">=</span>scatter_combo(df_,<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>popCorr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Correlation of  = 0.84 (4e-29) 
            And m= 17.195 b=14.2          
Countries worst correlation where overachive Nation
Russia         170.270535
UK             119.219670
Australia       72.894435
France          59.020671
Germany         47.334168
Ukraine         41.104002
South Korea     37.742411
Italy           36.341876
Cuba            33.005895
Kazakhstan      26.858922
dtype: float64
Countries worst correlation where unachieve Nation
India                  -48.322884
USA                    -40.224834
Saudi Arabia           -25.259275
Indonesia              -22.420333
United Arab Emirates   -20.462293
Philippines            -19.436562
Israel                 -18.132356
Mexico                 -17.725355
Austria                -17.596809
Chile                  -17.570066
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="78">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Underachieve</th>
      <th>Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>India</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>USA</td>
      <td>UK</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Saudi Arabia</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Indonesia</td>
      <td>France</td>
    </tr>
    <tr>
      <th>4</th>
      <td>United Arab Emirates</td>
      <td>Germany</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Philippines</td>
      <td>Ukraine</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Israel</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Mexico</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Austria</td>
      <td>Cuba</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Chile</td>
      <td>Kazakhstan</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-7-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>GDPCorr<span class="op">=</span>scatter_combo(df_,<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>GDPCorr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Correlation of  = 0.42 (7e-06) 
            And m= 0.113 b=20.6          
Countries worst correlation where overachive Nation
USA            275.692534
Russia         172.705692
UK             151.769692
Germany         96.889859
France          89.679993
Australia       86.426756
China           78.529401
Japan           69.159606
Italy           55.694604
South Korea     53.504928
dtype: float64
Countries worst correlation where unachieve Nation
India          -165.076115
Indonesia       -41.444198
Nigeria         -40.164409
Philippines     -32.332446
Vietnam         -28.785832
Egypt           -26.362309
Sudan           -24.687085
Uganda          -24.492699
Saudi Arabia    -23.601957
Cameroon        -22.395235
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="79">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Underachieve</th>
      <th>Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>India</td>
      <td>USA</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Indonesia</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Nigeria</td>
      <td>UK</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Philippines</td>
      <td>Germany</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Vietnam</td>
      <td>France</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Egypt</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Sudan</td>
      <td>China</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Uganda</td>
      <td>Japan</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Saudi Arabia</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Cameroon</td>
      <td>South Korea</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-8-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>scatter_combo(df_[df_[<span class="st">'Continent'</span>]<span class="op">==</span><span class="st">'Europe'</span>],<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Correlation of  = 0.93 (2e-16) 
            And m= 1.498 b=5.2          
Countries worst correlation where overachive Nation
UK                74.302826
Hungary           23.300286
Netherlands       23.269039
Belarus           19.808781
Denmark           17.002417
France            11.114933
Croatia            9.991807
Czech Republic     5.060035
Slovenia           4.658317
Lithuania          4.630427
dtype: float64
Countries worst correlation where unachieve Nation
Poland     -31.142356
Spain      -24.255647
Portugal   -16.682378
Russia     -15.733456
Austria    -14.709259
Romania    -12.930475
Belgium    -11.649525
Italy      -10.448382
Greece      -8.813758
Ukraine     -8.812069
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="80">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Underachieve</th>
      <th>Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Poland</td>
      <td>UK</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Spain</td>
      <td>Hungary</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Portugal</td>
      <td>Netherlands</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Russia</td>
      <td>Belarus</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Austria</td>
      <td>Denmark</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Romania</td>
      <td>France</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Belgium</td>
      <td>Croatia</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Italy</td>
      <td>Czech Republic</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Greece</td>
      <td>Slovenia</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Ukraine</td>
      <td>Lithuania</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-9-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>scatter_combo(df_[df_[<span class="st">'Continent'</span>]<span class="op">!=</span><span class="st">'Europe'</span>],<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Correlation of  = 0.49 (2e-05) 
            And m= 0.109 b=14.0          
Countries worst correlation where overachive Nation
USA            283.666410
Australia       93.134297
China           90.957076
Japan           76.277923
South Korea     60.318993
Canada          40.727568
Cuba            33.748715
Kazakhstan      27.859642
New Zealand     25.400672
Azerbaijan      19.852149
dtype: float64
Countries worst correlation where unachieve Nation
India          -152.808654
Indonesia       -33.720543
Nigeria         -32.669700
Philippines     -25.269105
Vietnam         -21.778878
Egypt           -19.334337
Sudan           -17.902477
Uganda          -17.715178
Saudi Arabia    -16.856911
Cameroon        -15.694183
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="81">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Underachieve</th>
      <th>Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>India</td>
      <td>USA</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Indonesia</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Nigeria</td>
      <td>China</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Philippines</td>
      <td>Japan</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Vietnam</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Egypt</td>
      <td>Canada</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Sudan</td>
      <td>Cuba</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Uganda</td>
      <td>Kazakhstan</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Saudi Arabia</td>
      <td>New Zealand</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Cameroon</td>
      <td>Azerbaijan</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-10-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>scatter_combo(df_[df_[<span class="st">'Continent'</span>]<span class="op">==</span><span class="st">'Europe'</span>],<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Correlation of  = 0.80 (6e-09) 
            And m= 45.027 b=10.1          
Countries worst correlation where overachive Nation
Russia            133.114656
UK                 47.990590
Ukraine            40.906665
Belarus            26.198814
Hungary            25.932286
Croatia             8.392025
Czech Republic      4.946635
Denmark             4.919196
Netherlands         3.836572
Serbia              2.527421
dtype: float64
Countries worst correlation where unachieve Nation
Germany       -54.463232
Switzerland   -25.766716
Austria       -25.402938
Belgium       -22.291826
Ireland       -18.937224
Portugal      -16.500704
Spain         -15.776437
Finland       -14.300792
Italy         -12.028820
Sweden        -10.294891
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="82">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Underachieve</th>
      <th>Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Germany</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Switzerland</td>
      <td>UK</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Austria</td>
      <td>Ukraine</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Belgium</td>
      <td>Belarus</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Ireland</td>
      <td>Hungary</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Portugal</td>
      <td>Croatia</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Spain</td>
      <td>Czech Republic</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Finland</td>
      <td>Denmark</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Italy</td>
      <td>Netherlands</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Sweden</td>
      <td>Serbia</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-11-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>scatter_combo(df_[df_[<span class="st">'Continent'</span>]<span class="op">!=</span><span class="st">'Europe'</span>],<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Correlation of  = 0.94 (2e-33) 
            And m= 16.234 b=8.7          
Countries worst correlation where overachive Nation
Australia      79.660038
South Korea    44.796081
Cuba           38.591086
Kazakhstan     32.508245
Kenya          28.660696
New Zealand    27.815933
Azerbaijan     25.573605
Canada         23.586944
Jamaica        23.041050
Brazil         19.812142
dtype: float64
Countries worst correlation where unachieve Nation
India                  -40.315038
Saudi Arabia           -19.100124
Indonesia              -15.916697
USA                    -14.609781
United Arab Emirates   -14.571357
Philippines            -13.602977
Israel                 -12.259868
Chile                  -11.840843
Venezuela              -11.565125
Mexico                 -11.204664
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="83">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Underachieve</th>
      <th>Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>India</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Saudi Arabia</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Indonesia</td>
      <td>Cuba</td>
    </tr>
    <tr>
      <th>3</th>
      <td>USA</td>
      <td>Kazakhstan</td>
    </tr>
    <tr>
      <th>4</th>
      <td>United Arab Emirates</td>
      <td>Kenya</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Philippines</td>
      <td>New Zealand</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Israel</td>
      <td>Azerbaijan</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Chile</td>
      <td>Canada</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Venezuela</td>
      <td>Jamaica</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Mexico</td>
      <td>Brazil</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-12-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_GDP<span class="op">=</span>copy.copy(df_[[<span class="st">'Nation'</span>,<span class="st">'Continent'</span>,<span class="st">'GDP'</span>]])</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df_GDP <span class="op">=</span> df_GDP.sort_values(<span class="st">'GDP'</span>,ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>df_GDP</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>rich_list <span class="op">=</span> df_GDP.head(<span class="dv">52</span>).index</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># # index_not_rich=[i for i,country in enumerate(df_.index) if (country not in rich_list) and (df_.iloc[i,2]!='Europe') and (df_.index[i]!='India')]</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># # index_rich=[i for i,country in enumerate(df_.index) if ( (df_.iloc[i,2]!='Europe') )]</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>index_rich<span class="op">=</span>[i <span class="cf">for</span> i,country <span class="kw">in</span> <span class="bu">enumerate</span>(df_.index) <span class="cf">if</span> (country <span class="kw">in</span> rich_list) ]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>index_not_rich<span class="op">=</span>[i <span class="cf">for</span> i,country <span class="kw">in</span> <span class="bu">enumerate</span>(df_.index) <span class="cf">if</span> (country <span class="kw">not</span> <span class="kw">in</span> rich_list) ]</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Rich- Population'</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>getCorr(df_.iloc[index_rich,:],<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Not Rich- Population'</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>getCorr(df_.iloc[index_not_rich,:],<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Rich- GDP'</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>getCorr(df_.iloc[index_rich,:],<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Not Rich- GDP'</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>getCorr(df_.iloc[index_not_rich,:],<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Index Rich- Population
Pearson Correlation of  = 0.37 (6e-03)
Spearman Correlation of  = 0.30 (3e-02)
         Index Not Rich- Population
Pearson Correlation of  = 0.17 (2e-01)
Spearman Correlation of  = 0.15 (3e-01)
         Index Rich- GDP
Pearson Correlation of  = 0.84 (7e-15)
Spearman Correlation of  = 0.50 (2e-04)
         Index Not Rich- GDP
Pearson Correlation of  = 0.32 (2e-02)
Spearman Correlation of  = 0.38 (6e-03)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Europe- GDP'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>getCorr(df_[df_[<span class="st">'Continent'</span>]<span class="op">==</span><span class="st">'Europe'</span>],<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Not Europe- GDP'</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>getCorr(df_[df_[<span class="st">'Continent'</span>]<span class="op">!=</span><span class="st">'Europe'</span>],<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Europe- Population'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>getCorr(df_[df_[<span class="st">'Continent'</span>]<span class="op">==</span><span class="st">'Europe'</span>],<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'         Index Not Europe- Population'</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>getCorr(df_[df_[<span class="st">'Continent'</span>]<span class="op">!=</span><span class="st">'Europe'</span>],<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Index Europe- GDP
Pearson Correlation of  = 0.80 (6e-09)
Spearman Correlation of  = 0.71 (1e-06)
         Index Not Europe- GDP
Pearson Correlation of  = 0.94 (2e-33)
Spearman Correlation of  = 0.51 (1e-05)
         Index Europe- Population
Pearson Correlation of  = 0.93 (2e-16)
Spearman Correlation of  = 0.81 (3e-09)
         Index Not Europe- Population
Pearson Correlation of  = 0.49 (2e-05)
Spearman Correlation of  = 0.42 (3e-04)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'GDP'</span>),getCorr(df_,<span class="st">'GDP'</span>,<span class="st">'number_of_medals'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Population'</span>),getCorr(df_,<span class="st">'Population'</span>,<span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>GDP
Pearson Correlation of  = 0.84 (4e-29)
Spearman Correlation of  = 0.60 (2e-11)
Population
Pearson Correlation of  = 0.42 (7e-06)
Spearman Correlation of  = 0.41 (1e-05)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>(None, None)</code></pre>
</div>
</div>
</section>
<section id="overview-of-gdp-and-population" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-gdp-and-population">Overview of GDP and population</h2>
<section id="hypothesis-gdp-is-correlated-with-medals-and-population-is-too-but-less-so" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis-gdp-is-correlated-with-medals-and-population-is-too-but-less-so">Hypothesis: GDP is correlated with Medals, and Population is too but less so</h3>
</section>
<section id="methods-used" class="level3">
<h3 class="anchored" data-anchor-id="methods-used">Methods Used</h3>
<p>Looking at number of medals against GDP and population, for a period from 2008-2016 inclusive. Using population and GDP data from ~2020. - scatter plots - to visualize the relationships between medals and GDP, and medals and population. Both show a correlation - Pearson &amp; Spearman correlation - To quatify the correlation seen. Pearson looks for a linear relationship whereas Spearman considers the ordering of the variables. The Pearson results showed a moderate to strong relationship for GDP and a weak to moderate relationship for population. The Spearman results were similar (more correlation for GDP) but the correlation values were lower. - I considered looking at the changes with time, but there were a lot of factors affecting country participation and the data was harder to obtain easily</p>
</section>
<section id="overview" class="level3">
<h3 class="anchored" data-anchor-id="overview">Overview</h3>
<p>Results were mainly as expected and hence PROVED.</p>
<ol type="1">
<li>GDP</li>
</ol>
<ul>
<li>ALL = strong AND significant</li>
<li>Europe = strong AND significant</li>
<li>NOT Europe = very strong AND significant</li>
</ul>
<ol start="2" type="1">
<li>Population</li>
</ol>
<ul>
<li>ALL = moderate AND significant</li>
<li>Europe = very strong AND significant</li>
<li>NOT Europe = moderate AND significant</li>
</ul>
<p>Using a line fit of the data (GDP or Population to Medals) gives an indication of which countries are reducing the correlation. If the country has more medals than the fit then it is overachieve and if it has less it is underachieveing. The table below shows which countries are under and overachieveing for GDP and population.</p>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>GDPCorr.rename(columns<span class="op">=</span>{<span class="st">'Overachieve'</span>:<span class="st">'GDP - Overachieve'</span>,<span class="st">'Underachieve'</span>:<span class="st">'GDP - Underachieve'</span>},inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>popCorr.rename(columns<span class="op">=</span>{<span class="st">'Overachieve'</span>:<span class="st">'Population - Overachieve'</span>,<span class="st">'Underachieve'</span>:<span class="st">'Population - Underachieve'</span>},inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>corrComb<span class="op">=</span>pd.concat([GDPCorr,popCorr],axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>corrComb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>GDP - Underachieve</th>
      <th>GDP - Overachieve</th>
      <th>Population - Underachieve</th>
      <th>Population - Overachieve</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>India</td>
      <td>USA</td>
      <td>India</td>
      <td>Russia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Indonesia</td>
      <td>Russia</td>
      <td>USA</td>
      <td>UK</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Nigeria</td>
      <td>UK</td>
      <td>Saudi Arabia</td>
      <td>Australia</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Philippines</td>
      <td>Germany</td>
      <td>Indonesia</td>
      <td>France</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Vietnam</td>
      <td>France</td>
      <td>United Arab Emirates</td>
      <td>Germany</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Egypt</td>
      <td>Australia</td>
      <td>Philippines</td>
      <td>Ukraine</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Sudan</td>
      <td>China</td>
      <td>Israel</td>
      <td>South Korea</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Uganda</td>
      <td>Japan</td>
      <td>Mexico</td>
      <td>Italy</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Saudi Arabia</td>
      <td>Italy</td>
      <td>Austria</td>
      <td>Cuba</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Cameroon</td>
      <td>South Korea</td>
      <td>Chile</td>
      <td>Kazakhstan</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>So based on the above it may make sense to group countries based on their GDP, into a rich and poor list. But as shown above this doesn’t increase the correlation for either group.</p>
<p>The only useful metric to increase the correlation was to group the countries into those from Europe. This is probably due to the similarity of countries within Europe (and outside): size, GDP but also culturally; and it may be because the European countries have much greater participation at the Olympics (both over currently and historically).</p>
</section>
<section id="guide-on-correlation" class="level3">
<h3 class="anchored" data-anchor-id="guide-on-correlation">Guide on Correlation</h3>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame({<span class="st">'Correlation'</span>:[<span class="st">'1'</span>,<span class="st">'0.8 - 1.0'</span>,<span class="st">'0.6 - 0.8'</span>,<span class="st">'0.4 - 0.6'</span>,<span class="st">'0.2 - 0.4'</span>,<span class="st">'0 - 0.2'</span>],<span class="op">\</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>   <span class="st">'Interpretation'</span>:[<span class="st">'Pefect'</span>,<span class="st">'Strong to Perfect'</span>,<span class="st">'Moderate to Very Strong'</span>,<span class="st">'Moderate to strong'</span>,<span class="st">'Weak to moderate'</span>,<span class="st">'Zero to weak'</span>]})</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Correlation</th>
      <th>Interpretation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Pefect</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.8 - 1.0</td>
      <td>Strong to Perfect</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.6 - 0.8</td>
      <td>Moderate to Very Strong</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.4 - 0.6</td>
      <td>Moderate to strong</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.2 - 0.4</td>
      <td>Weak to moderate</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0 - 0.2</td>
      <td>Zero to weak</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<pre><code>To determine whether the correlation between variables is significant, compare the p-value to your significance level. Usually, a significance level (denoted as α or alpha) of 0.05 works well. An α of 0.05 (5e-2) indicates that the risk of concluding that a correlation exists—when, actually, no correlation exists—is 5%. The p-value tells you whether the correlation coefficient is significantly different from 0. (A coefficient of 0 indicates that there is no linear relationship.)

- P-value ≤ α (5e-2): The correlation is statistically significant
    If the p-value is less than or equal to the significance level, then you can conclude that the correlation is different from 0. 
- P-value &gt; α (5e-2): The correlation is not statistically significant
    If the p-value is greater than the significance level, then you cannot conclude that the correlation is different from 0. 
    </code></pre>
<p>https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6107969/</p>
<p>https://support.minitab.com/en-us/minitab-express/1/help-and-how-to/modeling-statistics/regression/how-to/correlation/interpret-the-results/</p>
</section>
</section>
<section id="number-of-athletes" class="level2">
<h2 class="anchored" data-anchor-id="number-of-athletes">Number of athletes</h2>
<p>A metric that would make sense to correlate with medals would be the number of athletes each nation sends to an Olympics. This is because, for the most part, participation is done on merit. That is athletes have to qualify against athletes from other nations.</p>
<p>So the metrics we want to look at are: - the number of athletes per nation attending a particular games - the number of medals per nation per games</p>
<p><em>NB I will just use male athletes for simplicity</em></p>
<section id="change-in-average-athletes-per-continent" class="level3">
<h3 class="anchored" data-anchor-id="change-in-average-athletes-per-continent">Change in average athletes per continent</h3>
<p>First, let us look if the greater number of athletes from Europe is also reflected in the average number of athletes each nation sends within each continent.</p>
<p>As shown below European countries send around twice as many athletes per nation as other continents.</p>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}" data-execution_count="14">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>tempa<span class="op">=</span> sqldf(<span class="st">'SELECT                                     </span><span class="ch">\</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="st">            Year,                                        </span><span class="ch">\</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="st">             Continent,                                  </span><span class="ch">\</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="st">             AVG(numbers)  as ath_per_nation             </span><span class="ch">\</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM(SELECT                                      </span><span class="ch">\</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="st">            c.Continent,                                 </span><span class="ch">\</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="st">            a.Year,</span><span class="ch">\</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="st">            COUNT(*)           AS numbers                </span><span class="ch">\</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="st">            FROM                                         </span><span class="ch">\</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="st">                df_country as c                          </span><span class="ch">\</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="st">            LEFT JOIN                                    </span><span class="ch">\</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="st">                df_M_S as a                              </span><span class="ch">\</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="st">            ON                                           </span><span class="ch">\</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="st">                a.NOC = c.NOC                            </span><span class="ch">\</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                     </span><span class="ch">\</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="st">                a.Year,c.Continent,c.Nation              </span><span class="ch">\</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="st">            ORDER BY                                     </span><span class="ch">\</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="st">                Year asc) A                              </span><span class="ch">\</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                     </span><span class="ch">\</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="st">                 Year,Continent;'</span>,<span class="bu">locals</span>())</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">5</span>))</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>cola<span class="op">=</span>[<span class="st">'g&gt;--'</span>,<span class="st">'&lt;r-.'</span>,<span class="st">'bo-'</span>,<span class="st">'mv-'</span>,<span class="st">'kp:'</span>]</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,continent <span class="kw">in</span> <span class="bu">enumerate</span>(tempa.Continent.unique()):</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>tempa[tempa.Continent<span class="op">==</span>continent][<span class="st">'Year'</span>]</span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>tempa[tempa.Continent<span class="op">==</span>continent][<span class="st">'ath_per_nation'</span>]</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>    plt.plot(x,y,cola[i])<span class="op">;</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>plt.legend(tempa.Continent.unique())<span class="op">;</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>plt.ylim([<span class="op">-</span><span class="dv">5</span>,<span class="dv">200</span>])</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Number of male athletes</span><span class="ch">\n</span><span class="st"> per nation'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="athletes-per-nation-vs-medals-per-nation" class="level3">
<h3 class="anchored" data-anchor-id="athletes-per-nation-vs-medals-per-nation">Athletes per nation VS medals per nation</h3>
<p>To look at this correlation we need to do the following steps: - Join athletes with country tables - Group by Nation and whether they have a medal - Count this, this will give number of events with a medal - Then need to remove nations that didn’t get any medals - Get scatter and correlation of these - Group by continent and do the same</p>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}" data-execution_count="120">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tempa<span class="op">=</span> sqldf(<span class="st">'SELECT                                     </span><span class="ch">\</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="st">             Continent,                                  </span><span class="ch">\</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="st">             Nation,                                     </span><span class="ch">\</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="st">             Medal,                                      </span><span class="ch">\</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="st">             SUM(numbers)   AS numbers                   </span><span class="ch">\</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM(SELECT                                      </span><span class="ch">\</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="st">            c.Continent,                                 </span><span class="ch">\</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="st">            c.Nation,                                    </span><span class="ch">\</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="st">            a.Medal,                                     </span><span class="ch">\</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="st">            COUNT(*)           AS numbers                </span><span class="ch">\</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="st">            FROM                                         </span><span class="ch">\</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="st">                df_country as c                          </span><span class="ch">\</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="st">            LEFT JOIN                                    </span><span class="ch">\</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="st">                df_M_S as a                              </span><span class="ch">\</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="st">            ON                                           </span><span class="ch">\</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="st">                a.NOC = c.NOC                            </span><span class="ch">\</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="st">            WHERE Year&gt;2003                              </span><span class="ch">\</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                     </span><span class="ch">\</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="st">                c.Continent,c.Nation,a.Medal_Gold,a.Medal_Silver,a.Medal_Bronze) A          </span><span class="ch">\</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                     </span><span class="ch">\</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="st">                Continent, Nation,Medal;'</span>,<span class="bu">locals</span>())</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>tempa2<span class="op">=</span> sqldf(<span class="st">'SELECT                                     </span><span class="ch">\</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="st">             Nation,                                     </span><span class="ch">\</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="st">             COUNT(numbers)   AS numbers                 </span><span class="ch">\</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM(SELECT                                      </span><span class="ch">\</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="st">            a.athlete_ID,                                </span><span class="ch">\</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="st">            c.Nation,                                    </span><span class="ch">\</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="st">            COUNT(*)           AS numbers                </span><span class="ch">\</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="st">            FROM                                         </span><span class="ch">\</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="st">                df_country as c                          </span><span class="ch">\</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="st">            LEFT JOIN                                    </span><span class="ch">\</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a><span class="st">                df_F_S as a                              </span><span class="ch">\</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="st">            ON                                           </span><span class="ch">\</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="st">                a.NOC = c.NOC                            </span><span class="ch">\</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="st">            WHERE Year=2016                              </span><span class="ch">\</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                     </span><span class="ch">\</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="st">                c.NOC,a.athlete_ID,a.Year) A             </span><span class="ch">\</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a><span class="st">            GROUP BY                                     </span><span class="ch">\</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a><span class="st">                Nation;'</span>,<span class="bu">locals</span>())</span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>tempa3<span class="op">=</span> tempa[tempa.Medal<span class="op">==</span><span class="dv">1</span>]</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a>tempa4<span class="op">=</span>sqldf(<span class="st">'</span><span class="ch">\</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a><span class="st">    SELECT A.Nation,A.numbers as num_medals,B.numbers as num_ath                 </span><span class="ch">\</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a><span class="st">    FROM tempa3 as A                              </span><span class="ch">\</span></span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a><span class="st">    LEFT JOIN tempa2 as B                         </span><span class="ch">\</span></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a><span class="st">    ON A.Nation=B.Nation                          </span><span class="ch">\</span></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a><span class="st">;'</span>,<span class="bu">locals</span>())</span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>tempa4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Nation</th>
      <th>num_medals</th>
      <th>num_ath</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Algeria</td>
      <td>4</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Botswana</td>
      <td>1</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Egypt</td>
      <td>9</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Eritrea</td>
      <td>1</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Ethiopia</td>
      <td>12</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>95</th>
      <td>UK</td>
      <td>245</td>
      <td>159.0</td>
    </tr>
    <tr>
      <th>96</th>
      <td>Ukraine</td>
      <td>51</td>
      <td>117.0</td>
    </tr>
    <tr>
      <th>97</th>
      <td>Australia</td>
      <td>251</td>
      <td>212.0</td>
    </tr>
    <tr>
      <th>98</th>
      <td>Fiji</td>
      <td>13</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>99</th>
      <td>New Zealand</td>
      <td>44</td>
      <td>97.0</td>
    </tr>
  </tbody>
</table>
<p>100 rows × 3 columns</p>
</div>
</div>
</div>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}" data-execution_count="122">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tempa4<span class="op">=</span>tempa4.dropna()</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span>tempa4.num_ath</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span>tempa4.num_medals</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">5</span>))</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>a<span class="op">=</span>scipy.stats.spearmanr(x,y)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>b<span class="op">=</span>scipy.stats.pearsonr(x,y)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Spearman correlation = </span><span class="sc">{:.2f}</span><span class="st"> (</span><span class="sc">{:.0e}</span><span class="st">) </span><span class="ch">\n</span><span class="st">and Pearson correlation= </span><span class="sc">{:.2f}</span><span class="st"> (</span><span class="sc">{:.0e}</span><span class="st">)'</span>\</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>      .<span class="bu">format</span>(a[<span class="dv">0</span>],a[<span class="dv">1</span>],b[<span class="dv">0</span>],b[<span class="dv">1</span>]))</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Athletes per nation'</span>)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Medals per nation'</span>)<span class="op">;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>p<span class="op">=</span>np.poly1d( np.polyfit(x,y,<span class="dv">2</span>) )</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>xx<span class="op">=</span>np.arange(<span class="dv">0</span>,<span class="dv">300</span>,<span class="dv">2</span>)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>yy<span class="op">=</span>p(np.arange(<span class="dv">0</span>,<span class="dv">300</span>,<span class="dv">2</span>))</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>plt.plot(xx,yy)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Spearman correlation = 0.83 (3e-26) 
and Pearson correlation= 0.87 (5e-32)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="2022-07-29-OlympicsSQL_GDPpopulation_files/figure-html/cell-21-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="overview-medals-vs-athletes-per-nation" class="level3">
<h3 class="anchored" data-anchor-id="overview-medals-vs-athletes-per-nation">Overview Medals VS Athletes per nation</h3>
<p>As was expected there is a good correlation between the number of athletes a nation sends and the number of medals they get</p>
<p>What may also have been expected and shown in the data, is that the relationship is not linear. Instead the more athletes a nation sends the greater the medals/athlete ratio.</p>
<p>i.e.&nbsp;If a nation sends more athletes it is more likely that a higher proportion of them will win medals</p>
</section>
</section>
<section id="cold-war" class="level2">
<h2 class="anchored" data-anchor-id="cold-war">Cold War</h2>
<p>The Cold War was a period of geopolitical tension between the United States and the Soviet Union and their respective allies, the Western Bloc and the Eastern Bloc, which began following World War II and ended in the early 1990s.</p>
<p>The conflict was based around the ideological and geopolitical struggle for global influence by these two superpowers.</p>
<p>The Soviet Union competed at the Olympics from 1952-1988. The Russian Empire had previously competed at the 1900, 1908 and 1912 Olympics games. In these games the best they ranked was 12th. In contrast the USA competed from the start of the Olympics and all subsequent games. In 1952 they were the most succesful nation, coming 1st in the medals table in 8 out of the previous 11 games (and second in the other 3).</p>
<p>The figures below show how during the Cold War period, The Soviet Union was able to compete with USA and in some cases beat them in the medals table. After this Cold War period the medals obtained by both the USA and the Soviet Union fell with respect to the totals from the European nations. Furthermore, USA reasserted it’s dominance after the Cold War period.</p>
<p><a href="https://en.wikipedia.org/wiki/Cold_War">Wikipedia Cold War</a></p>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> number_of_athletes_USA_USSR(df_F_S,df_M_S):</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    testa2<span class="op">=</span>sqldf(<span class="st">'</span><span class="ch">\</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="st">        SELECT                                 </span><span class="ch">\</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="st">        Year,                              </span><span class="ch">\</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="st">        NOCSMALL,                          </span><span class="ch">\</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="st">        count(*) AS number_of_athletes,     </span><span class="ch">\</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="st">        "F" AS Sex                          </span><span class="ch">\</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="st">    FROM                                   </span><span class="ch">\</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="st">         (SELECT                           </span><span class="ch">\</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="st">         athlete_ID,                        </span><span class="ch">\</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="st">         Year,                             </span><span class="ch">\</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="st">         CASE                                </span><span class="ch">\</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("FRA","ESP","ITA","POR","GBR","IRL","NED","BEL","DEN","SUI") THEN "WES"</span><span class="ch">\</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("POL","ROU","UKR","LAT","BUL","HUN","LTU","LAT","BLR","ALB","SVK","AUT","EST","BIH","BOH") THEN "EST"</span><span class="ch">\</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="USA" THEN "USA"       </span><span class="ch">\</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="EUN" THEN "EUN"       </span><span class="ch">\</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="st">            ELSE "ROW"</span><span class="ch">\</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="st">            END AS NOCSMALL                </span><span class="ch">\</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="st">         from df_F_S                       </span><span class="ch">\</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="st">         group by athlete_ID,Year               </span><span class="ch">\</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="st">         order by Year asc) A              </span><span class="ch">\</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="st">     GROUP BY Year, NOCSMALL               </span><span class="ch">\</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a><span class="st">     UNION ALL                                 </span><span class="ch">\</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="st">     SELECT                                </span><span class="ch">\</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="st">        Year,                              </span><span class="ch">\</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="st">        NOCSMALL,                          </span><span class="ch">\</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a><span class="st">        count(*) AS number_of_athletes,     </span><span class="ch">\</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="st">        "M" AS Sex                          </span><span class="ch">\</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="st">    FROM                                   </span><span class="ch">\</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="st">         (SELECT                           </span><span class="ch">\</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a><span class="st">         athlete_ID,                        </span><span class="ch">\</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="st">         Year,                             </span><span class="ch">\</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a><span class="st">         CASE                                </span><span class="ch">\</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("FRA","ESP","ITA","POR","GBR","IRL","NED","BEL","DEN","SUI") THEN "WES"</span><span class="ch">\</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("POL","ROU","UKR","LAT","BUL","HUN","LTU","LAT","BLR","ALB","SVK","AUT","EST","BIH","BOH") THEN "EST"</span><span class="ch">\</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="USA" THEN "USA"       </span><span class="ch">\</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="EUN" THEN "EUN"       </span><span class="ch">\</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a><span class="st">            ELSE "ROW"</span><span class="ch">\</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a><span class="st">            END AS NOCSMALL                </span><span class="ch">\</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a><span class="st">         from df_M_S                       </span><span class="ch">\</span></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a><span class="st">         group by athlete_ID,Year          </span><span class="ch">\</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a><span class="st">         order by Year asc) A              </span><span class="ch">\</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a><span class="st">     GROUP BY Year, NOCSMALL;'</span>,<span class="bu">locals</span>()  )</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> testa2</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> number_of_medals_USA_USSR(df_F_S,df_M_S):</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>    testa2<span class="op">=</span>sqldf(<span class="st">'</span><span class="ch">\</span></span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a><span class="st">        SELECT                                 </span><span class="ch">\</span></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a><span class="st">            COUNT(*) AS number_of_medals,</span><span class="ch">\</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a><span class="st">            Year, Sex, NOCSMALL</span><span class="ch">\</span></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM </span><span class="ch">\</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a><span class="st">        (SELECT NOCSMALL,Year,Sex,COUNT(*) AS counta</span><span class="ch">\</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a><span class="st">        FROM                                   </span><span class="ch">\</span></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a><span class="st">         (SELECT                           </span><span class="ch">\</span></span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a><span class="st">         athlete_ID,                        </span><span class="ch">\</span></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a><span class="st">         event_ID,                          </span><span class="ch">\</span></span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a><span class="st">         "F"   AS Sex,                      </span><span class="ch">\</span></span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a><span class="st">         Medal_Gold,Medal_Silver,Medal_Bronze,</span><span class="ch">\</span></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a><span class="st">         Year,                             </span><span class="ch">\</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a><span class="st">         CASE                                </span><span class="ch">\</span></span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("FRA","ESP","ITA","POR","GBR","IRL","NED","BEL","DEN","SUI") THEN "WES"</span><span class="ch">\</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("POL","ROU","UKR","LAT","BUL","HUN","LTU","LAT","BLR","ALB","SVK","AUT","EST","BIH","BOH") THEN "EST"</span><span class="ch">\</span></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="USA" THEN "USA"       </span><span class="ch">\</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="EUN" THEN "EUN"       </span><span class="ch">\</span></span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a><span class="st">            ELSE "ROW"</span><span class="ch">\</span></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a><span class="st">            END AS NOCSMALL                </span><span class="ch">\</span></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a><span class="st">         from df_F_S                       </span><span class="ch">\</span></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a><span class="st">         WHERE Medal_Gold=1 OR Medal_Silver=1 OR Medal_Bronze=1</span><span class="ch">\</span></span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a><span class="st">         UNION ALL                                 </span><span class="ch">\</span></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a><span class="st">         SELECT                           </span><span class="ch">\</span></span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a><span class="st">         athlete_ID,                        </span><span class="ch">\</span></span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a><span class="st">         event_ID,                          </span><span class="ch">\</span></span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a><span class="st">         "M" AS Sex,                       </span><span class="ch">\</span></span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a><span class="st">         Medal_Gold,Medal_Silver,Medal_Bronze,</span><span class="ch">\</span></span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a><span class="st">         Year,                             </span><span class="ch">\</span></span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a><span class="st">         CASE                                </span><span class="ch">\</span></span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("FRA","ESP","ITA","POR","GBR","IRL","NED","BEL","DEN","SUI") THEN "WES"</span><span class="ch">\</span></span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC IN ("POL","ROU","UKR","LAT","BUL","HUN","LTU","LAT","BLR","ALB","SVK","AUT","EST","BIH","BOH") THEN "EST"</span><span class="ch">\</span></span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="USA" THEN "USA"       </span><span class="ch">\</span></span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a><span class="st">            WHEN NOC="EUN" THEN "EUN"       </span><span class="ch">\</span></span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a><span class="st">            ELSE "ROW"</span><span class="ch">\</span></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a><span class="st">            END AS NOCSMALL                </span><span class="ch">\</span></span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a><span class="st">         from df_M_S                       </span><span class="ch">\</span></span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a><span class="st">         WHERE Medal_Gold=1 OR Medal_Silver=1 OR Medal_Bronze=1</span><span class="ch">\</span></span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a><span class="st">         order by Year asc) A</span><span class="ch">\</span></span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a><span class="st">     GROUP BY </span><span class="ch">\</span></span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a><span class="st">         Year, NOCSMALL,event_id,Medal_Gold,Medal_Silver,Medal_Bronze)  AS B</span><span class="ch">\</span></span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a><span class="st"> GROUP BY Year, NOCSMALL, Sex</span><span class="ch">\</span></span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a><span class="st">                 ;'</span>,<span class="bu">locals</span>()  )                                       </span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> testa2</span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a>USA_USSR_medals<span class="op">=</span>number_of_medals_USA_USSR(df_F_S,df_M_S)</span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>USA_USSR_athletes<span class="op">=</span>number_of_athletes_USA_USSR(df_F_S,df_M_S)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> yrplot(df__,whatplot<span class="op">=</span> <span class="st">'avg_weight'</span>): </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    countries<span class="op">=</span>[<span class="st">'EST'</span>, <span class="st">'EUN'</span> ,<span class="st">'ROW'</span>, <span class="st">'USA'</span> ,<span class="st">'WES'</span>]</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     df__.NOCSMALL.unique()</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     countries=np.sort(countries)</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(countries)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    cola<span class="op">=</span>[<span class="st">'&gt;'</span>,<span class="st">'o'</span>,<span class="st">'+'</span>,<span class="st">'*'</span>,<span class="st">'&lt;'</span>]</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    colur<span class="op">=</span>[[<span class="dv">1</span>,<span class="fl">0.6</span>,<span class="fl">.6</span>],[<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>],[<span class="fl">.5</span>,<span class="fl">.5</span>,<span class="fl">.5</span>],[<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>],[<span class="fl">.6</span>,<span class="fl">.6</span>,<span class="dv">1</span>]]</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     ['EST' 'EUN' 'ROW' 'USA' 'WES']</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">#     'EST','USA','WES','ROW','EUN'</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    fig,ax1<span class="op">=</span>plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">5</span>))</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i,country <span class="kw">in</span> <span class="bu">enumerate</span>(countries):</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> country<span class="op">!=</span><span class="st">'ROW'</span>:</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>            ax1.plot(df__[df__.NOCSMALL<span class="op">==</span>country].Year,<span class="op">\</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>                 df__[df__.NOCSMALL<span class="op">==</span>country][whatplot],<span class="op">\</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>                 marker<span class="op">=</span>cola[i],linestyle<span class="op">=</span><span class="st">'None'</span>,color<span class="op">=</span>colur[i]<span class="op">\</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>                 ,markersize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> doPlot(df_F,avgNo,whatplot,country,col,lw,ax1):</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>        bb <span class="op">=</span> df_F[df__.NOCSMALL<span class="op">==</span>country].Year.rolling(avgNo).mean()</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>        cc <span class="op">=</span> df_F[df__.NOCSMALL<span class="op">==</span>country][whatplot]</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>        cc <span class="op">=</span> cc.rolling(avgNo).mean()</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>        ax1.plot(bb,cc,linewidth<span class="op">=</span>lw,color<span class="op">=</span>col)</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ax1</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i,country <span class="kw">in</span> <span class="bu">enumerate</span>(countries):</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> country<span class="op">!=</span><span class="st">'ROW'</span>:</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>            ax1<span class="op">=</span>doPlot(df__,avgNo<span class="op">=</span><span class="dv">3</span>,whatplot<span class="op">=</span>whatplot,country<span class="op">=</span>country,col<span class="op">=</span>colur[i],lw<span class="op">=</span><span class="dv">3</span>,ax1<span class="op">=</span>ax1)</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>    lega <span class="op">=</span> [<span class="st">'East Europe'</span>,<span class="st">'Russia'</span>,<span class="st">'USA'</span>,<span class="st">'West Europe'</span>]</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    plt.legend(lega)</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>    plt.grid(<span class="va">True</span>)</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(modname(whatplot))</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ax1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>yrplot(USA_USSR_medals[USA_USSR_medals.Sex<span class="op">==</span><span class="st">'F'</span>],whatplot<span class="op">=</span> <span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="ghtop_images/ColdWarMedalsF.png" class="img-fluid"></p>
<div class="cell" data-run_control="{&quot;frozen&quot;:true}">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>yrplot(USA_USSR_medals[USA_USSR_medals.Sex<span class="op">==</span><span class="st">'M'</span>],whatplot<span class="op">=</span> <span class="st">'number_of_medals'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="ghtop_images/ColdWarMedalsM.png" class="img-fluid"></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>