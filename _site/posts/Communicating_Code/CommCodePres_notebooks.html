<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Thomas H. Simm">

<title>ThomasHSimm - Communicating code: Notebooks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//posts/Picture3.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ThomasHSimm</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ThomasHSimm"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?hl=en&amp;user=HdPDn1sAAAAJ"><i class="bi bi-mortarboard-fill" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#notebooks-general" id="toc-notebooks-general" class="nav-link active" data-scroll-target="#notebooks-general">Notebooks General</a>
  <ul class="collapse">
  <li><a href="#jupyter-notebooks" id="toc-jupyter-notebooks" class="nav-link" data-scroll-target="#jupyter-notebooks">Jupyter Notebooks</a></li>
  <li><a href="#example-of-a-notebook" id="toc-example-of-a-notebook" class="nav-link" data-scroll-target="#example-of-a-notebook">Example of a notebook</a></li>
  </ul></li>
  <li><a href="#notebooks-markdown-and-code" id="toc-notebooks-markdown-and-code" class="nav-link" data-scroll-target="#notebooks-markdown-and-code">Notebooks Markdown and Code</a>
  <ul class="collapse">
  <li><a href="#markdown-in-a-notebook" id="toc-markdown-in-a-notebook" class="nav-link" data-scroll-target="#markdown-in-a-notebook">Markdown in a notebook</a></li>
  <li><a href="#code-in-a-notebook" id="toc-code-in-a-notebook" class="nav-link" data-scroll-target="#code-in-a-notebook">Code in a notebook</a></li>
  <li><a href="#simpler-code-output" id="toc-simpler-code-output" class="nav-link" data-scroll-target="#simpler-code-output">Simpler code output</a></li>
  </ul></li>
  <li><a href="#notebooks-opinion" id="toc-notebooks-opinion" class="nav-link" data-scroll-target="#notebooks-opinion">Notebooks Opinion</a>
  <ul class="collapse">
  <li><a href="#notebooks-my-view" id="toc-notebooks-my-view" class="nav-link" data-scroll-target="#notebooks-my-view">Notebooks: my view</a></li>
  <li><a href="#notebook-benefits" id="toc-notebook-benefits" class="nav-link" data-scroll-target="#notebook-benefits">Notebook Benefits</a></li>
  <li><a href="#communicating-when-code-is-a-large-element-of-what-is-being-presented" id="toc-communicating-when-code-is-a-large-element-of-what-is-being-presented" class="nav-link" data-scroll-target="#communicating-when-code-is-a-large-element-of-what-is-being-presented">Communicating when code is a large element of what is being presented</a></li>
  </ul></li>
  <li><a href="#example-useage" id="toc-example-useage" class="nav-link" data-scroll-target="#example-useage">Example Useage</a>
  <ul class="collapse">
  <li><a href="#example-documenting-code" id="toc-example-documenting-code" class="nav-link" data-scroll-target="#example-documenting-code">Example: Documenting Code</a></li>
  <li><a href="#example-tool-to-aid-learning" id="toc-example-tool-to-aid-learning" class="nav-link" data-scroll-target="#example-tool-to-aid-learning">Example: Tool to aid learning</a></li>
  <li><a href="#example-debugging-code" id="toc-example-debugging-code" class="nav-link" data-scroll-target="#example-debugging-code">Example: Debugging Code</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Communicating code: Notebooks</h1>
<p class="subtitle lead">Using the notebook format to communicate code and data</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Thomas H. Simm </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>
<p><img src="../../posts/header2.png" height="200"></p>
<section id="notebooks-general" class="level1">
<h1>Notebooks General</h1>
<section id="jupyter-notebooks" class="level2">
<h2 class="anchored" data-anchor-id="jupyter-notebooks">Jupyter Notebooks</h2>
<p>From <a href="https://talkpython.fm/episodes/show/394/awesome-jupyter-libraries-and-extensions-in-2022">TalkPython: Awesome Jupyter Libraries and Extensions</a></p>
<blockquote class="blockquote">
<p>Jupyter is an amazing environment for exploring data and generating executable reports with Python. But there are many external tools, extensions, and libraries to make it so much better and make you more productive.</p>
</blockquote>
<ul>
<li>A notebook consists of two parts
<ul>
<li>markdown part where we can:
<ul>
<li>write text, add images, links, html, LaTeX etc</li>
</ul></li>
<li>code part which runs and displays output of code</li>
</ul></li>
</ul>
<p>Some links:</p>
<ul>
<li><a href="https://jupyterbook.org/en/stable/intro.html">Jupyter Book</a></li>
<li><a href="https://github.com/markusschanta/awesome-jupyter">A curated list of awesome Jupyter projects</a></li>
<li><a href="https://best-practice-and-impact.github.io/qa-of-code-guidance/code_documentation.html#generating-html-documentation">Code Documentation QA of Code</a></li>
<li><a href="https://www.fast.ai/posts/2019-05-13-blogging-advice.html">FastAI guide for better blogs</a></li>
</ul>
</section>
<section id="example-of-a-notebook" class="level2">
<h2 class="anchored" data-anchor-id="example-of-a-notebook">Example of a notebook</h2>
<p>An example notebook</p>
<p><img src="ghtop_images/jupyter.png" class="img-fluid"></p>
</section>
</section>
<section id="notebooks-markdown-and-code" class="level1">
<h1>Notebooks Markdown and Code</h1>
<section id="markdown-in-a-notebook" class="level2">
<h2 class="anchored" data-anchor-id="markdown-in-a-notebook">Markdown in a notebook</h2>
<p>Some useful commands:</p>
<ol type="1">
<li><p><code># Notebooks Markdown and Code</code> and <code>## Markdown in a notebook</code></p></li>
<li><p><code>![](ghtop_images/pest.png)</code> looks like this</p></li>
</ol>
<p><img src="ghtop_images/pest.png" class="img-fluid"></p>
<ol start="3" type="1">
<li>And the same with a mp4 file <code>![](ghtop_images/revealjs.mp4)</code></li>
</ol>
<p><video src="ghtop_images/revealjs.mp4" class="img-fluid" controls=""><a href="ghtop_images/revealjs.mp4">Video</a></video></p>
<ol start="4" type="1">
<li><code>&gt; If we want text like this</code></li>
</ol>
<blockquote class="blockquote">
<p>If we want text like this</p>
</blockquote>
<ol start="5" type="1">
<li>Or if we want code use `a = b + c`</li>
</ol>
<p>or:</p>
<p>```</p>
<p>a = b</p>
<p>a = a + c</p>
<p>```</p>
<p><code>a = b + c</code></p>
<ol start="6" type="1">
<li>HTML works too</li>
</ol>
<pre><code>&lt;img src="ghtop_images/pest.png"&gt;&lt;/img&gt;</code></pre>
<p><img src="ghtop_images/pest.png"></p>
</section>
<section id="code-in-a-notebook" class="level2">
<h2 class="anchored" data-anchor-id="code-in-a-notebook">Code in a notebook</h2>
<p>Example interactive format using altair:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> vega_datasets <span class="im">import</span> data</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>movies <span class="op">=</span> alt.UrlData(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    data.movies.url,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">format</span><span class="op">=</span>alt.DataFormat(parse<span class="op">=</span>{<span class="st">"Release_Date"</span>:<span class="st">"date"</span>})</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>ratings <span class="op">=</span> [<span class="st">'G'</span>, <span class="st">'NC-17'</span>, <span class="st">'PG'</span>, <span class="st">'PG-13'</span>, <span class="st">'R'</span>]</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>genres <span class="op">=</span> [<span class="st">'Action'</span>, <span class="st">'Adventure'</span>, <span class="st">'Black Comedy'</span>, <span class="st">'Comedy'</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Concert/Performance'</span>, <span class="st">'Documentary'</span>, <span class="st">'Drama'</span>, <span class="st">'Horror'</span>, <span class="st">'Musical'</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Romantic Comedy'</span>, <span class="st">'Thriller/Suspense'</span>, <span class="st">'Western'</span>]</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>base <span class="op">=</span> alt.Chart(movies, width<span class="op">=</span><span class="dv">200</span>, height<span class="op">=</span><span class="dv">200</span>).mark_point(filled<span class="op">=</span><span class="va">True</span>).transform_calculate(</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    Rounded_IMDB_Rating <span class="op">=</span> <span class="st">"floor(datum.IMDB_Rating)"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    Hundred_Million_Production <span class="op">=</span>  <span class="st">"datum.Production_Budget &gt; 100000000.0 ? 100 : 10"</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    Release_Year <span class="op">=</span> <span class="st">"year(datum.Release_Date)"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>).transform_filter(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    alt.datum.IMDB_Rating <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>).transform_filter(</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    alt.FieldOneOfPredicate(field<span class="op">=</span><span class="st">'MPAA_Rating'</span>, oneOf<span class="op">=</span>ratings)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>).encode(</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>alt.X(<span class="st">'Worldwide_Gross:Q'</span>, scale<span class="op">=</span>alt.Scale(domain<span class="op">=</span>(<span class="dv">100000</span>,<span class="dv">10</span><span class="op">**</span><span class="dv">9</span>), clamp<span class="op">=</span><span class="va">True</span>)),</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'IMDB_Rating:Q'</span>,</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    tooltip<span class="op">=</span><span class="st">"Title:N"</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co"># A slider filter</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>year_slider <span class="op">=</span> alt.binding_range(<span class="bu">min</span><span class="op">=</span><span class="dv">1969</span>, <span class="bu">max</span><span class="op">=</span><span class="dv">2018</span>, step<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>slider_selection <span class="op">=</span> alt.selection_single(bind<span class="op">=</span>year_slider, fields<span class="op">=</span>[<span class="st">'Release_Year'</span>], name<span class="op">=</span><span class="st">"Release Year_"</span>)</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>filter_year <span class="op">=</span> base.add_selection(</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    slider_selection</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>).transform_filter(</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    slider_selection</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>).properties(title<span class="op">=</span><span class="st">"Slider Filtering"</span>)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="co"># A dropdown filter</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>genre_dropdown <span class="op">=</span> alt.binding_select(options<span class="op">=</span>genres)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>genre_select <span class="op">=</span> alt.selection_single(fields<span class="op">=</span>[<span class="st">'Major_Genre'</span>], bind<span class="op">=</span>genre_dropdown, name<span class="op">=</span><span class="st">"Genre"</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>filter_genres <span class="op">=</span> base.add_selection(</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    genre_select</span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>).transform_filter(</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    genre_select</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>).properties(title<span class="op">=</span><span class="st">"Dropdown Filtering"</span>)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="co">#color changing marks</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>rating_radio <span class="op">=</span> alt.binding_radio(options<span class="op">=</span>ratings)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>rating_select <span class="op">=</span> alt.selection_single(fields<span class="op">=</span>[<span class="st">'MPAA_Rating'</span>], bind<span class="op">=</span>rating_radio, name<span class="op">=</span><span class="st">"Rating"</span>)</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>rating_color_condition <span class="op">=</span> alt.condition(rating_select,</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>                      alt.Color(<span class="st">'MPAA_Rating:N'</span>, legend<span class="op">=</span><span class="va">None</span>),</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>                      alt.value(<span class="st">'lightgray'</span>))</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>highlight_ratings <span class="op">=</span> base.add_selection(</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>    rating_select</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>).encode(</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span>rating_color_condition</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>).properties(title<span class="op">=</span><span class="st">"Radio Button Highlighting"</span>)</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Boolean selection for format changes</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>input_checkbox <span class="op">=</span> alt.binding_checkbox()</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>checkbox_selection <span class="op">=</span> alt.selection_single(bind<span class="op">=</span>input_checkbox, name<span class="op">=</span><span class="st">"Big Budget Films"</span>)</span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>size_checkbox_condition <span class="op">=</span> alt.condition(checkbox_selection,</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>                                        alt.SizeValue(<span class="dv">25</span>),</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>                                        alt.Size(<span class="st">'Hundred_Million_Production:Q'</span>)</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>                                       )</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>budget_sizing <span class="op">=</span> base.add_selection(</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>    checkbox_selection</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>).encode(</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>    size<span class="op">=</span>size_checkbox_condition</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>).properties(title<span class="op">=</span><span class="st">"Checkbox Formatting"</span>)</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>( filter_year <span class="op">|</span> filter_genres) <span class="op">&amp;</span>  (highlight_ratings <span class="op">|</span> budget_sizing  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">

<div id="altair-viz-cb41cb296a2d4069bfac08074d039ab7"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-cb41cb296a2d4069bfac08074d039ab7") {
      outputDiv = document.getElementById("altair-viz-cb41cb296a2d4069bfac08074d039ab7");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.17.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "4.17.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "vconcat": [{"hconcat": [{"mark": {"type": "point", "filled": true}, "encoding": {"tooltip": {"field": "Title", "type": "nominal"}, "x": {"field": "Worldwide_Gross", "scale": {"clamp": true, "domain": [100000, 1000000000]}, "type": "quantitative"}, "y": {"field": "IMDB_Rating", "type": "quantitative"}}, "height": 200, "selection": {"Release Year_": {"type": "single", "bind": {"input": "range", "max": 2018, "min": 1969, "step": 1}, "fields": ["Release_Year"]}}, "title": "Slider Filtering", "transform": [{"calculate": "floor(datum.IMDB_Rating)", "as": "Rounded_IMDB_Rating"}, {"calculate": "datum.Production_Budget > 100000000.0 ? 100 : 10", "as": "Hundred_Million_Production"}, {"calculate": "year(datum.Release_Date)", "as": "Release_Year"}, {"filter": "(datum.IMDB_Rating > 0)"}, {"filter": {"field": "MPAA_Rating", "oneOf": ["G", "NC-17", "PG", "PG-13", "R"]}}, {"filter": {"selection": "Release Year_"}}], "width": 200}, {"mark": {"type": "point", "filled": true}, "encoding": {"tooltip": {"field": "Title", "type": "nominal"}, "x": {"field": "Worldwide_Gross", "scale": {"clamp": true, "domain": [100000, 1000000000]}, "type": "quantitative"}, "y": {"field": "IMDB_Rating", "type": "quantitative"}}, "height": 200, "selection": {"Genre": {"type": "single", "fields": ["Major_Genre"], "bind": {"input": "select", "options": ["Action", "Adventure", "Black Comedy", "Comedy", "Concert/Performance", "Documentary", "Drama", "Horror", "Musical", "Romantic Comedy", "Thriller/Suspense", "Western"]}}}, "title": "Dropdown Filtering", "transform": [{"calculate": "floor(datum.IMDB_Rating)", "as": "Rounded_IMDB_Rating"}, {"calculate": "datum.Production_Budget > 100000000.0 ? 100 : 10", "as": "Hundred_Million_Production"}, {"calculate": "year(datum.Release_Date)", "as": "Release_Year"}, {"filter": "(datum.IMDB_Rating > 0)"}, {"filter": {"field": "MPAA_Rating", "oneOf": ["G", "NC-17", "PG", "PG-13", "R"]}}, {"filter": {"selection": "Genre"}}], "width": 200}]}, {"hconcat": [{"mark": {"type": "point", "filled": true}, "encoding": {"color": {"condition": {"field": "MPAA_Rating", "legend": null, "type": "nominal", "selection": "Rating"}, "value": "lightgray"}, "tooltip": {"field": "Title", "type": "nominal"}, "x": {"field": "Worldwide_Gross", "scale": {"clamp": true, "domain": [100000, 1000000000]}, "type": "quantitative"}, "y": {"field": "IMDB_Rating", "type": "quantitative"}}, "height": 200, "selection": {"Rating": {"type": "single", "fields": ["MPAA_Rating"], "bind": {"input": "radio", "options": ["G", "NC-17", "PG", "PG-13", "R"]}}}, "title": "Radio Button Highlighting", "transform": [{"calculate": "floor(datum.IMDB_Rating)", "as": "Rounded_IMDB_Rating"}, {"calculate": "datum.Production_Budget > 100000000.0 ? 100 : 10", "as": "Hundred_Million_Production"}, {"calculate": "year(datum.Release_Date)", "as": "Release_Year"}, {"filter": "(datum.IMDB_Rating > 0)"}, {"filter": {"field": "MPAA_Rating", "oneOf": ["G", "NC-17", "PG", "PG-13", "R"]}}], "width": 200}, {"mark": {"type": "point", "filled": true}, "encoding": {"size": {"condition": {"value": 25, "selection": "Big Budget Films"}, "field": "Hundred_Million_Production", "type": "quantitative"}, "tooltip": {"field": "Title", "type": "nominal"}, "x": {"field": "Worldwide_Gross", "scale": {"clamp": true, "domain": [100000, 1000000000]}, "type": "quantitative"}, "y": {"field": "IMDB_Rating", "type": "quantitative"}}, "height": 200, "selection": {"Big Budget Films": {"type": "single", "bind": {"input": "checkbox"}}}, "title": "Checkbox Formatting", "transform": [{"calculate": "floor(datum.IMDB_Rating)", "as": "Rounded_IMDB_Rating"}, {"calculate": "datum.Production_Budget > 100000000.0 ? 100 : 10", "as": "Hundred_Million_Production"}, {"calculate": "year(datum.Release_Date)", "as": "Release_Year"}, {"filter": "(datum.IMDB_Rating > 0)"}, {"filter": {"field": "MPAA_Rating", "oneOf": ["G", "NC-17", "PG", "PG-13", "R"]}}], "width": 200}]}], "data": {"url": "https://cdn.jsdelivr.net/npm/vega-datasets@v1.29.0/data/movies.json", "format": {"parse": {"Release_Date": "date"}}}, "$schema": "https://vega.github.io/schema/vega-lite/v4.17.0.json"}, {"mode": "vega-lite"});
</script>
</div>
</div>
</section>
<section id="simpler-code-output" class="level2">
<h2 class="anchored" data-anchor-id="simpler-code-output">Simpler code output</h2>
<pre><code>x = np.arange(0,np.pi,.01)
y = np.sin(x)
plt.plot(x,y)</code></pre>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">0</span>,np.pi,<span class="fl">.01</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.sin(x)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="CommCodePres_notebooks_files/figure-html/cell-3-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="notebooks-opinion" class="level1">
<h1>Notebooks Opinion</h1>
<section id="notebooks-my-view" class="level2">
<h2 class="anchored" data-anchor-id="notebooks-my-view">Notebooks: my view</h2>
<p>Although notebooks have their <em>validish</em> detractors <a href="https://www.youtube.com/watch?v=7jiPeIFXb6U">I don’t like notebooks.- Joel Grus Youtube</a> I think if you approach them in the right way they are a super powerful tool.</p>
<p>The negatives seem to be:</p>
<ul>
<li>encourage bad practice in code (a genuine problem)</li>
<li>issues around order of what cell is run (easily got around with good practice)</li>
<li>issues around lack of auto complete (I don’t see the issue, use in visual studio autocomplete is there)</li>
<li>no grammar/spelling correction</li>
<li>issues with using git and version control
<ul>
<li>there are ways around this though</li>
</ul></li>
</ul>
</section>
<section id="notebook-benefits" class="level2">
<h2 class="anchored" data-anchor-id="notebook-benefits">Notebook Benefits</h2>
<ul>
<li>Notebooks are <strong>intuitive</strong>
<ul>
<li>You have the code then the result of the code</li>
<li>Plus can add details of how code works</li>
<li>And it’s linear</li>
</ul></li>
<li>Can get things up and working <strong>quickly</strong></li>
<li>Aid with communicating code</li>
<li>Encourages <strong>Writing</strong>
<ul>
<li>and writing things down aids thinking in the now and understanding what you did and why in the future<br>
</li>
<li><a href="https://www.fast.ai/posts/2019-05-13-blogging-advice.html">FastAI guide for better blogs</a></li>
</ul></li>
<li>Can use shell commands e.g.&nbsp;<code>!pip install pandas</code></li>
<li>Can use <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html">magic commands</a> e.g.&nbsp;<code>%%time</code> to time a cell</li>
<li>Easy to convert code to a pipeline</li>
</ul>
<p>With many companies moving towards Python/R from Excel and a varied level of skills. The first of these is particularly important to aid communicating code</p>
</section>
<section id="communicating-when-code-is-a-large-element-of-what-is-being-presented" class="level2">
<h2 class="anchored" data-anchor-id="communicating-when-code-is-a-large-element-of-what-is-being-presented">Communicating when code is a large element of what is being presented</h2>
<ul>
<li>Microsoft Word/ppt- type methods aren’t set-up well to include code</li>
<li>Programming files (e.g.&nbsp;<code>.py</code>) aren’t set-up well to share</li>
<li>Videoing code with outputs is an option, but don’t translate to other formats (i.e.&nbsp;we may also need to do a written format of this)</li>
<li>Apps (e.g.&nbsp;streamlit) can be good.
<ul>
<li>But the code is hidden</li>
</ul></li>
<li>Programming notebooks (e.g.<code>.ipynb</code>) offer a good and easy to share code but with some limitations</li>
</ul>
<p>An easier way is to convert the notebooks to html</p>
<ul>
<li>e.g.&nbsp;maybe someone doesn’t have python installed</li>
</ul>
</section>
</section>
<section id="example-useage" class="level1">
<h1>Example Useage</h1>
<section id="example-documenting-code" class="level2">
<h2 class="anchored" data-anchor-id="example-documenting-code">Example: Documenting Code</h2>
<ul>
<li><p><a href="https://thomashsimm.github.io/PesticideDocs/UK_areas.html">Here</a> is my website for my research project on pesticides in UK food.</p></li>
<li><p>This is not the same as documentation for a package but there are parallels</p></li>
</ul>
<p>This does a few things:</p>
<ul>
<li>Documents the analysis steps I have taken including the code and outputs
<ul>
<li>Useful for data transparency, useability of the code if needs modifiying/adapting, and why I did XYZ</li>
</ul></li>
<li>Provides a way to present the data
<ul>
<li>There is a streamlit app, but sometimes I like to be able to see the code</li>
</ul></li>
</ul>
<p><img src="ghtop_images/pest.png" class="img-fluid"></p>
</section>
<section id="example-tool-to-aid-learning" class="level2">
<h2 class="anchored" data-anchor-id="example-tool-to-aid-learning">Example: Tool to aid learning</h2>
<p>A big area I have been using Jupyter Notebooks for is to aid learning</p>
<ul>
<li>If you want to understand something it helps to write it down</li>
<li>Having the code next to it is a big advantage</li>
<li>And if stored on github you can access it anywhere</li>
</ul>
<p><a href="https://thomashsimm.com/tensorflow/2022/09/28/Tensorflow.html">Tensoflow cheat sheet</a> <img src="ghtop_images/tflow.png" class="img-fluid"></p>
</section>
<section id="example-debugging-code" class="level2">
<h2 class="anchored" data-anchor-id="example-debugging-code">Example: Debugging Code</h2>
<ul>
<li>Since starting at ONS I have been working with understanding an existing project and latterly adding code to it</li>
<li>The project consists of multiple python files across several folders
<ul>
<li>My Python was good but lots of the functions and their useage weren’t immediately obvious to me</li>
</ul></li>
<li><strong>break-points</strong> in VS Studio is really good to step through the code and work out what happens in the code.
<ul>
<li>I had not used before with Python (but had lots with MATLAB), and it’s really useful</li>
</ul></li>
<li>But it can be limited what you can do
<ul>
<li>difficult to probe code if want to write more than 1 line of code</li>
<li>the experience/knowledge exists as you go through it but no documentation to refer to later, e.g.&nbsp;function X does this when I give it Y etc</li>
</ul></li>
<li>By copying and pasting code into Jupyter cells I could see and document how they worked (e.g.&nbsp;changing inputs)
<ul>
<li>This (copying and pasting) would get around code changes too (which would be an issue if modules were just imported)</li>
<li>because this was all done in Jupyter notebook I can have a ipynb code file and a html file showing how the code works</li>
<li>I could even save a pickle file of the variables at a particularly point to understand how the code would work from this point</li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>